<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <meta name="theme-color" content="#E8E3D7">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <title>CDMX — Jan 2025</title>
  <link rel="manifest" href="manifest.json">
  <link rel="apple-touch-icon" href="icon-192.png">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Barlow+Condensed:wght@500;600;700&family=Source+Serif+4:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
  <style>
    :root {
      --cream: #E8E3D7;
      --cream-dark: #DDD8CC;
      --terracotta: #C4492B;
      --terracotta-light: #D4593B;
      --black: #1A1A1A;
      --gray: #6B6B6B;
      --gray-light: #9A9A9A;
      --font-display: 'Barlow Condensed', sans-serif;
      --font-body: 'Source Serif 4', Georgia, serif;
      --safe-top: env(safe-area-inset-top, 0px);
      --safe-bottom: env(safe-area-inset-bottom, 0px);
      /* Custom easing curves */
      --ease-out-expo: cubic-bezier(0.16, 1, 0.3, 1);
      --ease-out-back: cubic-bezier(0.34, 1.56, 0.64, 1);
      --ease-spring: cubic-bezier(0.32, 0.72, 0, 1);
      /* Typography scale */
      --text-sm: 0.875rem;
      --text-base: 1rem;
      --text-lg: 1.25rem;
      --text-xl: 1.5rem;
      --text-2xl: 2rem;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      -webkit-tap-highlight-color: transparent;
    }

    html {
      background: var(--cream);
    }

    body {
      font-family: var(--font-body);
      background: var(--cream);
      color: var(--black);
      min-height: 100vh;
      min-height: 100dvh;
      line-height: 1.5;
      padding-top: var(--safe-top);
      padding-bottom: var(--safe-bottom);
    }

    header {
      padding: 1.5rem 1.25rem 1rem;
      border-bottom: 1px solid rgba(0,0,0,0.08);
    }

    .header-top {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 0.25rem;
    }

    h1 {
      font-family: var(--font-display);
      font-size: var(--text-2xl);
      font-weight: 700;
      letter-spacing: 0.02em;
      text-transform: uppercase;
      line-height: 1;
      text-wrap: balance;
    }

    .hotel-link {
      font-family: var(--font-display);
      font-size: var(--text-sm);
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: var(--terracotta);
      text-decoration: none;
      padding: 0.5rem;
      margin: -0.5rem;
    }

    .dates {
      font-family: var(--font-display);
      font-size: var(--text-sm);
      font-weight: 500;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--gray);
    }

    nav {
      padding: 1rem 0;
      border-bottom: 1px solid rgba(0,0,0,0.08);
      overflow-x: auto;
      overflow-y: hidden;
      -webkit-overflow-scrolling: touch;
      scrollbar-width: none;
    }

    nav::-webkit-scrollbar {
      display: none;
    }

    .tabs {
      display: flex;
      gap: 0;
      padding: 0 0.25rem 0 1.25rem;
      min-width: max-content;
    }

    .tab {
      font-family: var(--font-display);
      font-size: var(--text-sm);
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.06em;
      padding: 0.75rem 1rem;
      background: transparent;
      border: none;
      color: var(--gray);
      cursor: pointer;
      transition: color 0.2s var(--ease-out-expo);
      white-space: nowrap;
      position: relative;
    }

    .tab:first-child {
      padding-left: 0;
    }

    .tab::after {
      content: '';
      position: absolute;
      bottom: 0.25rem;
      left: 1rem;
      right: 1rem;
      height: 2px;
      background: var(--terracotta);
      transform: scaleX(0);
      transition: transform 0.2s var(--ease-out-expo);
    }

    .tab.active {
      color: var(--black);
    }

    .tab.active::after {
      transform: scaleX(1);
    }

    main {
      padding: 1.5rem 1.25rem;
      padding-bottom: calc(5rem + var(--safe-bottom));
    }

    .panel {
      display: none;
    }

    .panel.active {
      display: block;
      animation: fadeIn 0.25s var(--ease-out-expo);
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(8px); filter: blur(4px); }
      to { opacity: 1; transform: translateY(0); filter: blur(0); }
    }

    .day-header {
      margin-bottom: 1.5rem;
    }

    .day-title {
      font-family: var(--font-display);
      font-size: var(--text-xl);
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.02em;
      margin-bottom: 0.25rem;
      text-wrap: balance;
    }

    .day-subtitle {
      font-size: var(--text-sm);
      color: var(--gray);
      font-style: italic;
    }

    .flight-card {
      background: var(--black);
      color: var(--cream);
      padding: 1.25rem;
      margin-bottom: 1.5rem;
    }

    .flight-label {
      font-family: var(--font-display);
      font-size: var(--text-sm);
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: var(--gray-light);
      margin-bottom: 0.5rem;
    }

    .flight-route {
      font-family: var(--font-display);
      font-size: var(--text-xl);
      font-weight: 700;
      letter-spacing: 0.04em;
      margin-bottom: 0.25rem;
    }

    .flight-details {
      font-size: var(--text-sm);
      color: var(--gray-light);
    }

    .flight-number {
      font-family: var(--font-display);
      font-weight: 600;
      color: var(--cream);
    }

    .event-card {
      background: var(--terracotta);
      color: var(--cream);
      padding: 1.25rem;
      margin-bottom: 1.5rem;
    }

    .event-label {
      font-family: var(--font-display);
      font-size: var(--text-sm);
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      opacity: 0.8;
      margin-bottom: 0.5rem;
    }

    .event-title {
      font-family: var(--font-display);
      font-size: var(--text-xl);
      font-weight: 700;
      letter-spacing: 0.02em;
      margin-bottom: 0.25rem;
      text-wrap: balance;
    }

    .event-details {
      font-size: var(--text-sm);
      opacity: 0.9;
    }

    .event-link {
      display: inline-flex;
      align-items: center;
      gap: 0.25rem;
      font-family: var(--font-display);
      font-size: var(--text-sm);
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.06em;
      color: var(--cream);
      text-decoration: none;
      margin-top: 0.75rem;
      margin-right: 1.25rem;
      padding: 0.25rem 0;
      opacity: 0.9;
    }

    .event-link svg {
      width: 12px;
      height: 12px;
    }

    .time-block {
      margin-bottom: 1.75rem;
    }

    .time-label {
      font-family: var(--font-display);
      font-size: var(--text-sm);
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--terracotta);
      margin-bottom: 0.5rem;
    }

    .place-item {
      padding: 1.25rem 0;
    }

    .place-header {
      display: flex;
      align-items: flex-start;
      gap: 1rem;
    }

    .image-stack {
      position: relative;
      width: 128px;
      height: 128px;
      flex-shrink: 0;
    }

    .image-stack img {
      position: absolute;
      width: 128px;
      height: 128px;
      border-radius: 6px;
      object-fit: cover;
      box-shadow: 0 2px 8px rgba(0,0,0,0.15);
      transition: transform 0.3s var(--ease-out-back), filter 0.25s var(--ease-out-expo);
      cursor: grab;
    }

    .image-stack img:active {
      cursor: grabbing;
    }

    /* Stack effect - cards behind with playful rotation */
    .image-stack img.stack-1 { z-index: 5; transform: rotate(0deg) scale(1); }
    .image-stack img.stack-2 { z-index: 4; transform: rotate(3deg) translate(3px, 2px) scale(0.98); }
    .image-stack img.stack-3 { z-index: 3; transform: rotate(-2deg) translate(-2px, 3px) scale(0.96); }
    .image-stack img.stack-4 { z-index: 2; transform: rotate(2deg) translate(2px, -2px) scale(0.94); }
    .image-stack img.stack-5 { z-index: 1; transform: rotate(-3deg) translate(-3px, -1px) scale(0.92); }

    /* Swipe animation */
    .image-stack img.swiping-out {
      transform: translateX(-80px) rotate(-8deg) scale(0.95);
    }

    .place-content {
      flex: 1;
      min-width: 0;
    }

    .place-name-row {
      display: flex;
      align-items: baseline;
      gap: 0.5rem;
      flex-wrap: wrap;
    }

    .place-name {
      font-weight: 600;
      font-size: var(--text-base);
    }

    .place-tag {
      font-family: var(--font-display);
      font-size: var(--text-sm);
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.04em;
      background: var(--terracotta);
      color: var(--cream);
      padding: 0.2rem 0.4rem;
    }

    .place-desc {
      font-size: var(--text-sm);
      color: var(--gray);
      margin-top: 0.25rem;
    }

    .place-link {
      display: inline-flex;
      align-items: center;
      gap: 0.25rem;
      font-family: var(--font-display);
      font-size: var(--text-sm);
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.06em;
      color: var(--terracotta);
      text-decoration: none;
      margin-right: 1rem;
      padding: 0.25rem 0;
    }

    .place-link:first-of-type {
      margin-top: 0.5rem;
    }

    .place-link svg {
      width: 12px;
      height: 12px;
    }

    .neighborhood-label {
      font-family: var(--font-display);
      font-size: var(--text-sm);
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: var(--gray);
      margin-bottom: 0.75rem;
    }

    .history-btn {
      position: fixed;
      bottom: calc(1.5rem + var(--safe-bottom));
      right: 1.25rem;
      width: 56px;
      height: 56px;
      background: var(--black);
      color: var(--cream);
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      transition: transform 0.2s var(--ease-out-expo), background 0.2s var(--ease-out-expo);
      z-index: 100;
    }

    .history-btn:active {
      transform: scale(0.95);
    }

    .history-btn.active {
      background: var(--terracotta);
    }

    .history-btn svg {
      width: 24px;
      height: 24px;
      transition: transform 0.25s var(--ease-out-back);
    }

    .history-btn .icon-close {
      position: absolute;
      transform: rotate(45deg) scale(0);
    }

    .history-btn.active .icon-book {
      transform: rotate(-45deg) scale(0);
    }

    .history-btn.active .icon-close {
      transform: rotate(0) scale(1);
    }

    .history-panel {
      position: fixed;
      inset: 0;
      background: var(--cream);
      z-index: 99;
      transform: translateY(100%);
      transition: transform 0.3s var(--ease-spring);
      overflow-y: auto;
      padding: calc(1.5rem + var(--safe-top)) 1.25rem calc(1.5rem + var(--safe-bottom));
    }

    .history-panel.open {
      transform: translateY(0);
    }


    /* History Browse View */
    .history-browse {
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: calc(100dvh - var(--safe-top) - var(--safe-bottom) - 3rem);
    }

    .history-browse.hidden {
      display: none;
    }

    .era-cards {
      position: relative;
      width: 100%;
      height: calc(100dvh - var(--safe-top) - var(--safe-bottom) - 6rem);
      max-height: 600px;
    }

    .era-card {
      position: absolute;
      width: 100%;
      height: 100%;
      background: white;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 4px 20px rgba(0,0,0,0.12);
      cursor: pointer;
      transition: transform 0.35s var(--ease-out-back);
      display: flex;
      flex-direction: column;
    }

    .era-card.card-1 { z-index: 4; transform: rotate(0deg); }
    .era-card.card-2 { z-index: 3; transform: rotate(2.5deg) translate(6px, 8px); }
    .era-card.card-3 { z-index: 2; transform: rotate(-2deg) translate(-5px, 14px); }
    .era-card.card-4 { z-index: 1; transform: rotate(3.5deg) translate(8px, 20px); }

    .era-card.swiping {
      transform: translateX(-100px) rotate(-5deg) !important;
    }

    .era-card-image {
      width: 100%;
      aspect-ratio: 3 / 2;
      object-fit: cover;
      flex-shrink: 0;
    }

    .era-card-content {
      padding: 1rem 1.25rem;
      flex: 1;
      display: flex;
      flex-direction: column;
    }

    .era-card-dates {
      font-family: var(--font-display);
      font-size: var(--text-sm);
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--terracotta);
      margin-bottom: 0.25rem;
    }

    .era-card-title {
      font-family: var(--font-display);
      font-size: var(--text-lg);
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.02em;
      margin-bottom: 0.5rem;
    }

    .era-card-teaser {
      font-size: var(--text-sm);
      color: var(--gray);
      line-height: 1.4;
    }

    .era-card-arrow {
      margin-top: auto;
      padding-top: 1rem;
      color: var(--terracotta);
      display: flex;
      justify-content: flex-start;
    }

    .era-card-arrow svg {
      width: 24px;
      height: 24px;
    }


    /* History Detail View */
    .history-detail {
      display: none;
    }

    .history-detail.active {
      display: block;
      animation: fadeIn 0.3s var(--ease-out-expo);
    }

    .detail-back {
      display: inline-flex;
      align-items: center;
      gap: 0.25rem;
      font-family: var(--font-display);
      font-size: var(--text-sm);
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.06em;
      color: var(--terracotta);
      background: none;
      border: none;
      cursor: pointer;
      padding: 0.5rem 0;
      margin-bottom: 1rem;
    }

    .detail-back svg {
      width: 16px;
      height: 16px;
    }

    .detail-image {
      width: calc(100% + 2.5rem);
      margin-left: -1.25rem;
      height: 200px;
      object-fit: cover;
      margin-bottom: 1.25rem;
    }

    .detail-dates {
      font-family: var(--font-display);
      font-size: var(--text-sm);
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--terracotta);
      margin-bottom: 0.25rem;
    }

    .detail-title {
      font-family: var(--font-display);
      font-size: var(--text-xl);
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.02em;
      margin-bottom: 1rem;
    }

    .detail-content {
      font-size: var(--text-base);
      line-height: 1.7;
      color: var(--black);
    }

    .detail-content p {
      margin-bottom: 1rem;
    }

    .detail-content strong {
      font-weight: 600;
    }

    .related-places {
      margin-top: 2rem;
      padding-top: 1.5rem;
      border-top: 1px solid rgba(0,0,0,0.08);
    }

    .related-places-title {
      font-family: var(--font-display);
      font-size: var(--text-sm);
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--gray);
      margin-bottom: 0.75rem;
    }

    .related-place-link {
      display: block;
      font-family: var(--font-display);
      font-size: var(--text-sm);
      font-weight: 600;
      color: var(--terracotta);
      text-decoration: none;
      padding: 0.5rem 0;
      cursor: pointer;
    }

    .overview-grid {
      display: grid;
      gap: 1rem;
    }

    .overview-day {
      background: var(--cream-dark);
      padding: 1.25rem;
      cursor: pointer;
      transition: background 0.2s var(--ease-out-expo);
    }

    .overview-day:active {
      background: #D4CFBE;
    }

    .overview-day-name {
      font-family: var(--font-display);
      font-size: var(--text-sm);
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--terracotta);
      margin-bottom: 0.25rem;
    }

    .overview-day-title {
      font-family: var(--font-display);
      font-size: var(--text-lg);
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.02em;
      margin-bottom: 0.5rem;
      text-wrap: balance;
    }

    .overview-day-highlights {
      font-size: var(--text-sm);
      color: var(--gray);
    }

    .offline-banner {
      position: fixed;
      top: var(--safe-top);
      left: 0;
      right: 0;
      background: var(--terracotta);
      color: white;
      font-family: var(--font-display);
      font-size: var(--text-sm);
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.06em;
      text-align: center;
      padding: 0.5rem;
      transform: translateY(-100%);
      transition: transform 0.25s var(--ease-out-expo);
      z-index: 200;
    }

    .offline-banner.show {
      transform: translateY(0);
    }

    /* Accessibility: Respect reduced motion preferences */
    @media (prefers-reduced-motion: reduce) {
      *,
      *::before,
      *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
        scroll-behavior: auto !important;
      }
    }
  </style>
</head>
<body>
  <div class="offline-banner" id="offlineBanner">Offline Mode</div>

  <header>
    <div class="header-top">
      <h1>CDMX</h1>
      <a href="https://maps.google.com/?q=Casa+Ofelia+Polanco+Anatole+France+129+Mexico+City" class="hotel-link" target="_blank" rel="noopener">Casa Ofelia →</a>
    </div>
    <p class="dates">January 15–19, 2025</p>
  </header>

  <nav>
    <div class="tabs" id="tabs">
      <button class="tab active" data-panel="overview">Overview</button>
      <button class="tab" data-panel="thu">Thu</button>
      <button class="tab" data-panel="fri">Fri</button>
      <button class="tab" data-panel="sat">Sat</button>
      <button class="tab" data-panel="sun">Sun</button>
      <button class="tab" data-panel="mon">Mon</button>
    </div>
  </nav>

  <main id="main">
    <!-- Overview Panel -->
    <section class="panel active" id="panel-overview">
      <div class="overview-grid">
        <div class="overview-day" data-goto="thu">
          <div class="overview-day-name">Thursday</div>
          <div class="overview-day-title">Soft Landing</div>
          <div class="overview-day-highlights">Arrive, settle in, Ticuchi 7pm</div>
        </div>
        <div class="overview-day" data-goto="fri">
          <div class="overview-day-name">Friday</div>
          <div class="overview-day-title">Anthropología + Roma</div>
          <div class="overview-day-highlights">Museum, Expendio de Maíz, Roma shops, Lucha Libre</div>
        </div>
        <div class="overview-day" data-goto="sat">
          <div class="overview-day-name">Saturday</div>
          <div class="overview-day-title">Centro + Condesa</div>
          <div class="overview-day-highlights">Zócalo, La Merced, Lardo 5:15pm</div>
        </div>
        <div class="overview-day" data-goto="sun">
          <div class="overview-day-name">Sunday</div>
          <div class="overview-day-title">Balloon + Chill</div>
          <div class="overview-day-highlights">5am Teotihuacan, Comedor Jacinta dinner</div>
        </div>
        <div class="overview-day" data-goto="mon">
          <div class="overview-day-name">Monday</div>
          <div class="overview-day-title">Departure</div>
          <div class="overview-day-highlights">Coffee, 8am at airport</div>
        </div>
      </div>
    </section>

    <!-- Thursday Panel -->
    <section class="panel" id="panel-thu">
      <div class="day-header">
        <h2 class="day-title">Thursday, Jan 15</h2>
        <p class="day-subtitle">Soft Landing</p>
      </div>

      <div class="flight-card">
        <div class="flight-label">Outbound Flight</div>
        <div class="flight-route">MIA → MEX</div>
        <div class="flight-details">
          <span class="flight-number">Delta 7945</span> · 1:00pm – 3:55pm
        </div>
      </div>

      <div class="time-block">
        <div class="time-label">~4:00 PM</div>
        <div class="place-item" data-id="thu-arrive">
          <div class="place-header">
                        <div class="place-content">
              <div class="place-name">Land at MEX, taxi to hotel</div>
              <p class="place-desc">~45 min ride to Polanco</p>
            </div>
          </div>
        </div>
      </div>

      <div class="time-block">
        <div class="time-label">Late Afternoon</div>
        <div class="place-item" data-id="thu-settle">
          <div class="place-header">
            <div class="image-stack">
              <img src="images/parque-lincoln-1.jpg" alt="Parque Lincoln" class="stack-1" loading="lazy">
              <img src="images/parque-lincoln-2.jpg" alt="Parque Lincoln" class="stack-2" loading="lazy">
              <img src="images/parque-lincoln-3.jpg" alt="Parque Lincoln" class="stack-3" loading="lazy">
              <img src="images/parque-lincoln-4.jpg" alt="Parque Lincoln" class="stack-4" loading="lazy">
              <img src="images/parque-lincoln-5.jpg" alt="Parque Lincoln" class="stack-5" loading="lazy">
            </div>
                        <div class="place-content">
              <div class="place-name">Settle in, casual Polanco exploring</div>
              <p class="place-desc">Depending on energy — Parque Lincoln, Polanquito</p>
              <a href="https://maps.google.com/?q=Parque+Lincoln+Polanco+Mexico+City" class="place-link" target="_blank" rel="noopener">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg>
                Map
              </a>
              <a href="https://m.uber.com/ul/?action=setPickup&dropoff[formatted_address]=Parque+Lincoln+Polanco+Mexico+City" class="place-link" target="_blank" rel="noopener">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="1" y="3" width="15" height="13" rx="2"/><path d="M16 8h2a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-1"/><circle cx="5.5" cy="18.5" r="2.5"/><circle cx="18.5" cy="18.5" r="2.5"/></svg>
                Uber
              </a>
            </div>
          </div>
        </div>
      </div>

      <div class="time-block">
        <div class="time-label">7:00 PM</div>
        <div class="place-item" data-id="thu-dinner">
          <div class="place-header">
            <div class="image-stack">
              <img src="images/ticuchi-1.jpg" alt="Ticuchi" class="stack-1" loading="lazy">
              <img src="images/ticuchi-2.jpg" alt="Ticuchi" class="stack-2" loading="lazy">
              <img src="images/ticuchi-3.jpg" alt="Ticuchi" class="stack-3" loading="lazy">
              <img src="images/ticuchi-4.jpg" alt="Ticuchi" class="stack-4" loading="lazy">
              <img src="images/ticuchi-5.jpg" alt="Ticuchi" class="stack-5" loading="lazy">
            </div>
                        <div class="place-content">
              <div class="place-name-row">
                <span class="place-name">Ticuchi</span>
                <span class="place-tag">Reserved</span>
              </div>
              <p class="place-desc">Oaxacan cuisine</p>
              <a href="https://maps.google.com/?q=Ticuchi+Mexico+City" class="place-link" target="_blank" rel="noopener">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg>
                Map
              </a>
              <a href="https://m.uber.com/ul/?action=setPickup&dropoff[formatted_address]=Ticuchi+Mexico+City" class="place-link" target="_blank" rel="noopener">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="1" y="3" width="15" height="13" rx="2"/><path d="M16 8h2a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-1"/><circle cx="5.5" cy="18.5" r="2.5"/><circle cx="18.5" cy="18.5" r="2.5"/></svg>
                Uber
              </a>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Friday Panel -->
    <section class="panel" id="panel-fri">
      <div class="day-header">
        <h2 class="day-title">Friday, Jan 16</h2>
        <p class="day-subtitle">Anthropología + Roma + Lucha Libre</p>
      </div>

      <div class="neighborhood-label">Polanco / Chapultepec</div>

      <div class="time-block">
        <div class="time-label">9:30 AM</div>
        <div class="place-item" data-id="fri-museo">
          <div class="place-header">
            <div class="image-stack">
              <img src="images/museo-antropologia-1.jpg" alt="Museo de Antropología" class="stack-1" loading="lazy">
              <img src="images/museo-antropologia-2.jpg" alt="Museo de Antropología" class="stack-2" loading="lazy">
              <img src="images/museo-antropologia-3.jpg" alt="Museo de Antropología" class="stack-3" loading="lazy">
              <img src="images/museo-antropologia-4.jpg" alt="Museo de Antropología" class="stack-4" loading="lazy">
              <img src="images/museo-antropologia-5.jpg" alt="Museo de Antropología" class="stack-5" loading="lazy">
            </div>
                        <div class="place-content">
              <div class="place-name">Museo de Antropología</div>
              <p class="place-desc">2–3 hours. Don't miss the Aztec and Maya halls</p>
              <a href="https://maps.google.com/?q=Museo+Nacional+de+Antropologia+Mexico+City" class="place-link" target="_blank" rel="noopener">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg>
                Map
              </a>
              <a href="https://m.uber.com/ul/?action=setPickup&dropoff[formatted_address]=Museo+Nacional+de+Antropologia+Mexico+City" class="place-link" target="_blank" rel="noopener">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="1" y="3" width="15" height="13" rx="2"/><path d="M16 8h2a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-1"/><circle cx="5.5" cy="18.5" r="2.5"/><circle cx="18.5" cy="18.5" r="2.5"/></svg>
                Uber
              </a>
            </div>
          </div>
        </div>
      </div>

      <div class="neighborhood-label">Roma</div>

      <div class="time-block">
        <div class="time-label">1:00 PM</div>
        <div class="place-item" data-id="fri-expendio">
          <div class="place-header">
            <div class="image-stack">
              <img src="images/expendio-maiz-1.jpg" alt="Expendio de Maíz" class="stack-1" loading="lazy">
              <img src="images/expendio-maiz-2.jpg" alt="Expendio de Maíz" class="stack-2" loading="lazy">
              <img src="images/expendio-maiz-3.jpg" alt="Expendio de Maíz" class="stack-3" loading="lazy">
              <img src="images/expendio-maiz-4.jpg" alt="Expendio de Maíz" class="stack-4" loading="lazy">
              <img src="images/expendio-maiz-5.jpg" alt="Expendio de Maíz" class="stack-5" loading="lazy">
            </div>
                        <div class="place-content">
              <div class="place-name">Expendio de Maíz</div>
              <p class="place-desc">Corn-focused, no menu — trust the kitchen</p>
              <a href="https://maps.google.com/?q=Expendio+de+Maiz+Mexico+City" class="place-link" target="_blank" rel="noopener">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg>
                Map
              </a>
              <a href="https://m.uber.com/ul/?action=setPickup&dropoff[formatted_address]=Expendio+de+Maiz+Mexico+City" class="place-link" target="_blank" rel="noopener">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="1" y="3" width="15" height="13" rx="2"/><path d="M16 8h2a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-1"/><circle cx="5.5" cy="18.5" r="2.5"/><circle cx="18.5" cy="18.5" r="2.5"/></svg>
                Uber
              </a>
            </div>
          </div>
        </div>
      </div>

      <div class="time-block">
        <div class="time-label">Afternoon</div>
        <div class="place-item" data-id="fri-roma">
          <div class="place-header">
            <div class="image-stack">
              <img src="images/plaza-rio-janeiro-1.jpg" alt="Plaza Río de Janeiro" class="stack-1" loading="lazy">
              <img src="images/plaza-rio-janeiro-2.jpg" alt="Plaza Río de Janeiro" class="stack-2" loading="lazy">
              <img src="images/plaza-rio-janeiro-3.jpg" alt="Plaza Río de Janeiro" class="stack-3" loading="lazy">
              <img src="images/plaza-rio-janeiro-4.jpg" alt="Plaza Río de Janeiro" class="stack-4" loading="lazy">
              <img src="images/plaza-rio-janeiro-5.jpg" alt="Plaza Río de Janeiro" class="stack-5" loading="lazy">
            </div>
                        <div class="place-content">
              <div class="place-name">Roma Wandering</div>
              <p class="place-desc">Plaza Río de Janeiro, neighborhood stroll</p>
              <a href="https://maps.google.com/?q=Plaza+Rio+de+Janeiro+Roma+Mexico+City" class="place-link" target="_blank" rel="noopener">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg>
                Map
              </a>
              <a href="https://m.uber.com/ul/?action=setPickup&dropoff[formatted_address]=Plaza+Rio+de+Janeiro+Roma+Mexico+City" class="place-link" target="_blank" rel="noopener">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="1" y="3" width="15" height="13" rx="2"/><path d="M16 8h2a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-1"/><circle cx="5.5" cy="18.5" r="2.5"/><circle cx="18.5" cy="18.5" r="2.5"/></svg>
                Uber
              </a>
            </div>
          </div>
        </div>
        <div class="place-item" data-id="fri-casabosques">
          <div class="place-header">
            <div class="image-stack">
              <img src="images/casa-bosques-1.jpg" alt="Casa Bosques" class="stack-1" loading="lazy">
              <img src="images/casa-bosques-2.jpg" alt="Casa Bosques" class="stack-2" loading="lazy">
              <img src="images/casa-bosques-3.jpg" alt="Casa Bosques" class="stack-3" loading="lazy">
              <img src="images/casa-bosques-4.jpg" alt="Casa Bosques" class="stack-4" loading="lazy">
              <img src="images/casa-bosques-5.jpg" alt="Casa Bosques" class="stack-5" loading="lazy">
            </div>
                        <div class="place-content">
              <div class="place-name">Casa Bosques</div>
              <p class="place-desc">Bookstore & design objects</p>
              <a href="https://maps.google.com/?q=Casa+Bosques+Mexico+City" class="place-link" target="_blank" rel="noopener">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg>
                Map
              </a>
              <a href="https://m.uber.com/ul/?action=setPickup&dropoff[formatted_address]=Casa+Bosques+Mexico+City" class="place-link" target="_blank" rel="noopener">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="1" y="3" width="15" height="13" rx="2"/><path d="M16 8h2a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-1"/><circle cx="5.5" cy="18.5" r="2.5"/><circle cx="18.5" cy="18.5" r="2.5"/></svg>
                Uber
              </a>
            </div>
          </div>
        </div>
        <div class="place-item" data-id="fri-originario">
          <div class="place-header">
            <div class="image-stack">
              <img src="images/originario-1.jpg" alt="Originario" class="stack-1" loading="lazy">
              <img src="images/originario-2.jpg" alt="Originario" class="stack-2" loading="lazy">
              <img src="images/originario-3.jpg" alt="Originario" class="stack-3" loading="lazy">
              <img src="images/originario-4.jpg" alt="Originario" class="stack-4" loading="lazy">
              <img src="images/originario-5.jpg" alt="Originario" class="stack-5" loading="lazy">
            </div>
                        <div class="place-content">
              <div class="place-name">Originario</div>
              <p class="place-desc">Home goods, textiles, ceramics</p>
              <a href="https://maps.google.com/?q=Originario+Mexico+City" class="place-link" target="_blank" rel="noopener">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg>
                Map
              </a>
              <a href="https://m.uber.com/ul/?action=setPickup&dropoff[formatted_address]=Originario+Mexico+City" class="place-link" target="_blank" rel="noopener">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="1" y="3" width="15" height="13" rx="2"/><path d="M16 8h2a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-1"/><circle cx="5.5" cy="18.5" r="2.5"/><circle cx="18.5" cy="18.5" r="2.5"/></svg>
                Uber
              </a>
            </div>
          </div>
        </div>
        <div class="place-item" data-id="fri-medellin">
          <div class="place-header">
            <div class="image-stack">
              <img src="images/mercado-medellin-1.jpg" alt="Mercado Medellín" class="stack-1" loading="lazy">
              <img src="images/mercado-medellin-2.jpg" alt="Mercado Medellín" class="stack-2" loading="lazy">
              <img src="images/mercado-medellin-3.jpg" alt="Mercado Medellín" class="stack-3" loading="lazy">
              <img src="images/mercado-medellin-4.jpg" alt="Mercado Medellín" class="stack-4" loading="lazy">
              <img src="images/mercado-medellin-5.jpg" alt="Mercado Medellín" class="stack-5" loading="lazy">
            </div>
                        <div class="place-content">
              <div class="place-name">Mercado Medellín</div>
              <p class="place-desc">Local market, great for snacks</p>
              <a href="https://maps.google.com/?q=Mercado+Medellin+Mexico+City" class="place-link" target="_blank" rel="noopener">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg>
                Map
              </a>
              <a href="https://m.uber.com/ul/?action=setPickup&dropoff[formatted_address]=Mercado+Medellin+Mexico+City" class="place-link" target="_blank" rel="noopener">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="1" y="3" width="15" height="13" rx="2"/><path d="M16 8h2a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-1"/><circle cx="5.5" cy="18.5" r="2.5"/><circle cx="18.5" cy="18.5" r="2.5"/></svg>
                Uber
              </a>
            </div>
          </div>
        </div>
        <div class="place-item" data-id="fri-extras">
          <div class="place-header">
                        <div class="place-content">
              <div class="place-name">Also nearby</div>
              <p class="place-desc">Café de Nadie, Somsaa, Helados Cometa</p>
            </div>
          </div>
        </div>
      </div>

      <div class="neighborhood-label">Polanco</div>

      <div class="time-block">
        <div class="time-label">~6:00 PM</div>
        <div class="place-item" data-id="fri-quickbite">
          <div class="place-header">
                        <div class="place-content">
              <div class="place-name">Quick bite near hotel</div>
              <p class="place-desc">Grab tacos before the match</p>
            </div>
          </div>
        </div>
      </div>

      <div class="event-card">
        <div class="event-label">Evening Event</div>
        <div class="event-title">Lucha Libre</div>
        <div class="event-details">7:30pm · Arena Mexico</div>
        <a href="https://maps.google.com/?q=Arena+Mexico+Dr+Lavista+189+Mexico+City" class="event-link" target="_blank" rel="noopener">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg>
          Map
        </a>
        <a href="https://m.uber.com/ul/?action=setPickup&dropoff[formatted_address]=Arena+Mexico+Dr+Lavista+189+Mexico+City" class="event-link" target="_blank" rel="noopener">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="1" y="3" width="15" height="13" rx="2"/><path d="M16 8h2a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-1"/><circle cx="5.5" cy="18.5" r="2.5"/><circle cx="18.5" cy="18.5" r="2.5"/></svg>
          Uber
        </a>
      </div>
    </section>

    <!-- Saturday Panel -->
    <section class="panel" id="panel-sat">
      <div class="day-header">
        <h2 class="day-title">Saturday, Jan 17</h2>
        <p class="day-subtitle">Centro + Condesa</p>
      </div>

      <div class="neighborhood-label">Centro Histórico</div>

      <div class="time-block">
        <div class="time-label">Morning</div>
        <div class="place-item" data-id="sat-bellas">
          <div class="place-header">
            <div class="image-stack">
              <img src="images/bellas-artes-1.jpg" alt="Palacio de Bellas Artes" class="stack-1" loading="lazy">
              <img src="images/bellas-artes-2.jpg" alt="Palacio de Bellas Artes" class="stack-2" loading="lazy">
              <img src="images/bellas-artes-3.jpg" alt="Palacio de Bellas Artes" class="stack-3" loading="lazy">
              <img src="images/bellas-artes-4.jpg" alt="Palacio de Bellas Artes" class="stack-4" loading="lazy">
              <img src="images/bellas-artes-5.jpg" alt="Palacio de Bellas Artes" class="stack-5" loading="lazy">
            </div>
                        <div class="place-content">
              <div class="place-name">Palacio de Bellas Artes</div>
              <p class="place-desc">Art nouveau/deco masterpiece</p>
              <a href="https://maps.google.com/?q=Palacio+de+Bellas+Artes+Mexico+City" class="place-link" target="_blank" rel="noopener">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg>
                Map
              </a>
              <a href="https://m.uber.com/ul/?action=setPickup&dropoff[formatted_address]=Palacio+de+Bellas+Artes+Mexico+City" class="place-link" target="_blank" rel="noopener">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="1" y="3" width="15" height="13" rx="2"/><path d="M16 8h2a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-1"/><circle cx="5.5" cy="18.5" r="2.5"/><circle cx="18.5" cy="18.5" r="2.5"/></svg>
                Uber
              </a>
            </div>
          </div>
        </div>
        <div class="place-item" data-id="sat-correos">
          <div class="place-header">
            <div class="image-stack">
              <img src="images/palacio-correos-1.jpg" alt="Palacio de Correos" class="stack-1" loading="lazy">
              <img src="images/palacio-correos-2.jpg" alt="Palacio de Correos" class="stack-2" loading="lazy">
              <img src="images/palacio-correos-3.jpg" alt="Palacio de Correos" class="stack-3" loading="lazy">
              <img src="images/palacio-correos-4.jpg" alt="Palacio de Correos" class="stack-4" loading="lazy">
              <img src="images/palacio-correos-5.jpg" alt="Palacio de Correos" class="stack-5" loading="lazy">
            </div>
                        <div class="place-content">
              <div class="place-name">Palacio de Correos</div>
              <p class="place-desc">Stunning post office building</p>
              <a href="https://maps.google.com/?q=Palacio+de+Correos+Mexico+City" class="place-link" target="_blank" rel="noopener">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg>
                Map
              </a>
              <a href="https://m.uber.com/ul/?action=setPickup&dropoff[formatted_address]=Palacio+de+Correos+Mexico+City" class="place-link" target="_blank" rel="noopener">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="1" y="3" width="15" height="13" rx="2"/><path d="M16 8h2a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-1"/><circle cx="5.5" cy="18.5" r="2.5"/><circle cx="18.5" cy="18.5" r="2.5"/></svg>
                Uber
              </a>
            </div>
          </div>
        </div>
        <div class="place-item" data-id="sat-zocalo">
          <div class="place-header">
            <div class="image-stack">
              <img src="images/zocalo-1.jpg" alt="Zócalo" class="stack-1" loading="lazy">
              <img src="images/zocalo-2.jpg" alt="Zócalo" class="stack-2" loading="lazy">
              <img src="images/zocalo-3.jpg" alt="Zócalo" class="stack-3" loading="lazy">
              <img src="images/zocalo-4.jpg" alt="Zócalo" class="stack-4" loading="lazy">
              <img src="images/zocalo-5.jpg" alt="Zócalo" class="stack-5" loading="lazy">
            </div>
                        <div class="place-content">
              <div class="place-name">Zócalo</div>
              <p class="place-desc">Main square, massive flag</p>
              <a href="https://maps.google.com/?q=Zocalo+Mexico+City" class="place-link" target="_blank" rel="noopener">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg>
                Map
              </a>
              <a href="https://m.uber.com/ul/?action=setPickup&dropoff[formatted_address]=Zocalo+Mexico+City" class="place-link" target="_blank" rel="noopener">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="1" y="3" width="15" height="13" rx="2"/><path d="M16 8h2a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-1"/><circle cx="5.5" cy="18.5" r="2.5"/><circle cx="18.5" cy="18.5" r="2.5"/></svg>
                Uber
              </a>
            </div>
          </div>
        </div>
        <div class="place-item" data-id="sat-nacional">
          <div class="place-header">
            <div class="image-stack">
              <img src="images/palacio-nacional-1.jpg" alt="Palacio Nacional" class="stack-1" loading="lazy">
              <img src="images/palacio-nacional-2.jpg" alt="Palacio Nacional" class="stack-2" loading="lazy">
              <img src="images/palacio-nacional-3.jpg" alt="Palacio Nacional" class="stack-3" loading="lazy">
              <img src="images/palacio-nacional-4.jpg" alt="Palacio Nacional" class="stack-4" loading="lazy">
              <img src="images/palacio-nacional-5.jpg" alt="Palacio Nacional" class="stack-5" loading="lazy">
            </div>
                        <div class="place-content">
              <div class="place-name">Palacio Nacional</div>
              <p class="place-desc">Diego Rivera murals — free, bring ID</p>
              <a href="https://maps.google.com/?q=Palacio+Nacional+Mexico+City" class="place-link" target="_blank" rel="noopener">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg>
                Map
              </a>
              <a href="https://m.uber.com/ul/?action=setPickup&dropoff[formatted_address]=Palacio+Nacional+Mexico+City" class="place-link" target="_blank" rel="noopener">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="1" y="3" width="15" height="13" rx="2"/><path d="M16 8h2a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-1"/><circle cx="5.5" cy="18.5" r="2.5"/><circle cx="18.5" cy="18.5" r="2.5"/></svg>
                Uber
              </a>
            </div>
          </div>
        </div>
        <div class="place-item" data-id="sat-templo">
          <div class="place-header">
            <div class="image-stack">
              <img src="images/templo-mayor-1.jpg" alt="Templo Mayor" class="stack-1" loading="lazy">
              <img src="images/templo-mayor-2.jpg" alt="Templo Mayor" class="stack-2" loading="lazy">
              <img src="images/templo-mayor-3.jpg" alt="Templo Mayor" class="stack-3" loading="lazy">
              <img src="images/templo-mayor-4.jpg" alt="Templo Mayor" class="stack-4" loading="lazy">
              <img src="images/templo-mayor-5.jpg" alt="Templo Mayor" class="stack-5" loading="lazy">
            </div>
                        <div class="place-content">
              <div class="place-name">Templo Mayor</div>
              <p class="place-desc">Aztec ruins in the city center</p>
              <a href="https://maps.google.com/?q=Templo+Mayor+Mexico+City" class="place-link" target="_blank" rel="noopener">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg>
                Map
              </a>
              <a href="https://m.uber.com/ul/?action=setPickup&dropoff[formatted_address]=Templo+Mayor+Mexico+City" class="place-link" target="_blank" rel="noopener">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="1" y="3" width="15" height="13" rx="2"/><path d="M16 8h2a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-1"/><circle cx="5.5" cy="18.5" r="2.5"/><circle cx="18.5" cy="18.5" r="2.5"/></svg>
                Uber
              </a>
            </div>
          </div>
        </div>
        <div class="place-item" data-id="sat-catedral">
          <div class="place-header">
            <div class="image-stack">
              <img src="images/catedral-metropolitana-1.jpg" alt="Catedral Metropolitana" class="stack-1" loading="lazy">
              <img src="images/catedral-metropolitana-2.jpg" alt="Catedral Metropolitana" class="stack-2" loading="lazy">
              <img src="images/catedral-metropolitana-3.jpg" alt="Catedral Metropolitana" class="stack-3" loading="lazy">
              <img src="images/catedral-metropolitana-4.jpg" alt="Catedral Metropolitana" class="stack-4" loading="lazy">
              <img src="images/catedral-metropolitana-5.jpg" alt="Catedral Metropolitana" class="stack-5" loading="lazy">
            </div>
                        <div class="place-content">
              <div class="place-name">Catedral Metropolitana</div>
              <p class="place-desc">Largest cathedral in the Americas</p>
              <a href="https://maps.google.com/?q=Catedral+Metropolitana+Mexico+City" class="place-link" target="_blank" rel="noopener">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg>
                Map
              </a>
              <a href="https://m.uber.com/ul/?action=setPickup&dropoff[formatted_address]=Catedral+Metropolitana+Mexico+City" class="place-link" target="_blank" rel="noopener">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="1" y="3" width="15" height="13" rx="2"/><path d="M16 8h2a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-1"/><circle cx="5.5" cy="18.5" r="2.5"/><circle cx="18.5" cy="18.5" r="2.5"/></svg>
                Uber
              </a>
            </div>
          </div>
        </div>
      </div>

      <div class="time-block">
        <div class="time-label">Late Morning</div>
        <div class="place-item" data-id="sat-merced">
          <div class="place-header">
            <div class="image-stack">
              <img src="images/la-merced-1.jpg" alt="La Merced" class="stack-1" loading="lazy">
              <img src="images/la-merced-2.jpg" alt="La Merced" class="stack-2" loading="lazy">
              <img src="images/la-merced-3.jpg" alt="La Merced" class="stack-3" loading="lazy">
              <img src="images/la-merced-4.jpg" alt="La Merced" class="stack-4" loading="lazy">
              <img src="images/la-merced-5.jpg" alt="La Merced" class="stack-5" loading="lazy">
            </div>
                        <div class="place-content">
              <div class="place-name">La Merced</div>
              <p class="place-desc">One of the oldest & largest markets — graze here for lunch</p>
              <a href="https://maps.google.com/?q=Mercado+de+la+Merced+Mexico+City" class="place-link" target="_blank" rel="noopener">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg>
                Map
              </a>
              <a href="https://m.uber.com/ul/?action=setPickup&dropoff[formatted_address]=Mercado+de+la+Merced+Mexico+City" class="place-link" target="_blank" rel="noopener">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="1" y="3" width="15" height="13" rx="2"/><path d="M16 8h2a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-1"/><circle cx="5.5" cy="18.5" r="2.5"/><circle cx="18.5" cy="18.5" r="2.5"/></svg>
                Uber
              </a>
            </div>
          </div>
        </div>
      </div>

      <div class="neighborhood-label">Condesa</div>

      <div class="time-block">
        <div class="time-label">Afternoon</div>
        <div class="place-item" data-id="sat-parque">
          <div class="place-header">
            <div class="image-stack">
              <img src="images/parque-mexico-1.jpg" alt="Parque México" class="stack-1" loading="lazy">
              <img src="images/parque-mexico-2.jpg" alt="Parque México" class="stack-2" loading="lazy">
              <img src="images/parque-mexico-3.jpg" alt="Parque México" class="stack-3" loading="lazy">
              <img src="images/parque-mexico-4.jpg" alt="Parque México" class="stack-4" loading="lazy">
              <img src="images/parque-mexico-5.jpg" alt="Parque México" class="stack-5" loading="lazy">
            </div>
                        <div class="place-content">
              <div class="place-name">Parque México</div>
              <p class="place-desc">Art deco park, neighborhood heart</p>
              <a href="https://maps.google.com/?q=Parque+Mexico+Condesa+Mexico+City" class="place-link" target="_blank" rel="noopener">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg>
                Map
              </a>
              <a href="https://m.uber.com/ul/?action=setPickup&dropoff[formatted_address]=Parque+Mexico+Condesa+Mexico+City" class="place-link" target="_blank" rel="noopener">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="1" y="3" width="15" height="13" rx="2"/><path d="M16 8h2a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-1"/><circle cx="5.5" cy="18.5" r="2.5"/><circle cx="18.5" cy="18.5" r="2.5"/></svg>
                Uber
              </a>
            </div>
          </div>
        </div>
        <div class="place-item" data-id="sat-rufina">
          <div class="place-header">
            <div class="image-stack">
              <img src="images/rufina-1.jpg" alt="Rufina" class="stack-1" loading="lazy">
              <img src="images/rufina-2.jpg" alt="Rufina" class="stack-2" loading="lazy">
              <img src="images/rufina-3.jpg" alt="Rufina" class="stack-3" loading="lazy">
              <img src="images/rufina-4.jpg" alt="Rufina" class="stack-4" loading="lazy">
              <img src="images/rufina-5.jpg" alt="Rufina" class="stack-5" loading="lazy">
            </div>
                        <div class="place-content">
              <div class="place-name">Rufina</div>
              <p class="place-desc">Pottery</p>
              <a href="https://maps.google.com/?q=Rufina+Ceramica+Mexico+City" class="place-link" target="_blank" rel="noopener">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg>
                Map
              </a>
              <a href="https://m.uber.com/ul/?action=setPickup&dropoff[formatted_address]=Rufina+Ceramica+Mexico+City" class="place-link" target="_blank" rel="noopener">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="1" y="3" width="15" height="13" rx="2"/><path d="M16 8h2a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-1"/><circle cx="5.5" cy="18.5" r="2.5"/><circle cx="18.5" cy="18.5" r="2.5"/></svg>
                Uber
              </a>
            </div>
          </div>
        </div>
        <div class="place-item" data-id="sat-mooni">
          <div class="place-header">
            <div class="image-stack">
              <img src="images/mooni-1.jpg" alt="Mooni" class="stack-1" loading="lazy">
              <img src="images/mooni-2.jpg" alt="Mooni" class="stack-2" loading="lazy">
              <img src="images/mooni-3.jpg" alt="Mooni" class="stack-3" loading="lazy">
              <img src="images/mooni-4.jpg" alt="Mooni" class="stack-4" loading="lazy">
              <img src="images/mooni-5.jpg" alt="Mooni" class="stack-5" loading="lazy">
            </div>
                        <div class="place-content">
              <div class="place-name">Mooni</div>
              <p class="place-desc">Gallery / design</p>
              <a href="https://maps.google.com/?q=Mooni+Gallery+Mexico+City" class="place-link" target="_blank" rel="noopener">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg>
                Map
              </a>
              <a href="https://m.uber.com/ul/?action=setPickup&dropoff[formatted_address]=Mooni+Gallery+Mexico+City" class="place-link" target="_blank" rel="noopener">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="1" y="3" width="15" height="13" rx="2"/><path d="M16 8h2a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-1"/><circle cx="5.5" cy="18.5" r="2.5"/><circle cx="18.5" cy="18.5" r="2.5"/></svg>
                Uber
              </a>
            </div>
          </div>
        </div>
        <div class="place-item" data-id="sat-fabrica">
          <div class="place-header">
            <div class="image-stack">
              <img src="images/fabrica-social-1.jpg" alt="Fábrica Social" class="stack-1" loading="lazy">
              <img src="images/fabrica-social-2.jpg" alt="Fábrica Social" class="stack-2" loading="lazy">
              <img src="images/fabrica-social-3.jpg" alt="Fábrica Social" class="stack-3" loading="lazy">
              <img src="images/fabrica-social-4.jpg" alt="Fábrica Social" class="stack-4" loading="lazy">
              <img src="images/fabrica-social-5.jpg" alt="Fábrica Social" class="stack-5" loading="lazy">
            </div>
                        <div class="place-content">
              <div class="place-name">Fábrica Social</div>
              <p class="place-desc">Plants & crafts</p>
              <a href="https://maps.google.com/?q=Fabrica+Social+Mexico+City" class="place-link" target="_blank" rel="noopener">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg>
                Map
              </a>
              <a href="https://m.uber.com/ul/?action=setPickup&dropoff[formatted_address]=Fabrica+Social+Mexico+City" class="place-link" target="_blank" rel="noopener">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="1" y="3" width="15" height="13" rx="2"/><path d="M16 8h2a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-1"/><circle cx="5.5" cy="18.5" r="2.5"/><circle cx="18.5" cy="18.5" r="2.5"/></svg>
                Uber
              </a>
            </div>
          </div>
        </div>
      </div>

      <div class="time-block">
        <div class="time-label">5:15 PM</div>
        <div class="place-item" data-id="sat-dinner">
          <div class="place-header">
            <div class="image-stack">
              <img src="images/lardo-1.jpg" alt="Lardo" class="stack-1" loading="lazy">
              <img src="images/lardo-2.jpg" alt="Lardo" class="stack-2" loading="lazy">
              <img src="images/lardo-3.jpg" alt="Lardo" class="stack-3" loading="lazy">
              <img src="images/lardo-4.jpg" alt="Lardo" class="stack-4" loading="lazy">
              <img src="images/lardo-5.jpg" alt="Lardo" class="stack-5" loading="lazy">
            </div>
                        <div class="place-content">
              <div class="place-name-row">
                <span class="place-name">Lardo</span>
                <span class="place-tag">Reserved</span>
              </div>
              <p class="place-desc">Mediterranean, wood-fired — connected to Panadería Rosetta</p>
              <a href="https://maps.google.com/?q=Lardo+Restaurant+Mexico+City" class="place-link" target="_blank" rel="noopener">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg>
                Map
              </a>
              <a href="https://m.uber.com/ul/?action=setPickup&dropoff[formatted_address]=Lardo+Restaurant+Mexico+City" class="place-link" target="_blank" rel="noopener">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="1" y="3" width="15" height="13" rx="2"/><path d="M16 8h2a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-1"/><circle cx="5.5" cy="18.5" r="2.5"/><circle cx="18.5" cy="18.5" r="2.5"/></svg>
                Uber
              </a>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Sunday Panel -->
    <section class="panel" id="panel-sun">
      <div class="day-header">
        <h2 class="day-title">Sunday, Jan 18</h2>
        <p class="day-subtitle">Balloon + Chill</p>
      </div>

      <div class="event-card">
        <div class="event-label">Morning Adventure</div>
        <div class="event-title">Teotihuacan Hot Air Balloon</div>
        <div class="event-details">5:00am pickup · JW Marriott Polanco (Andres Bello 29)</div>
        <a href="https://maps.google.com/?q=JW+Marriott+Hotel+Mexico+City+Polanco+Andres+Bello+29" class="event-link" target="_blank" rel="noopener">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg>
          Pickup Location
        </a>
        <a href="https://m.uber.com/ul/?action=setPickup&dropoff[formatted_address]=JW+Marriott+Hotel+Mexico+City+Polanco+Andres+Bello+29" class="event-link" target="_blank" rel="noopener">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="1" y="3" width="15" height="13" rx="2"/><path d="M16 8h2a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-1"/><circle cx="5.5" cy="18.5" r="2.5"/><circle cx="18.5" cy="18.5" r="2.5"/></svg>
          Uber
        </a>
      </div>

      <div class="time-block">
        <div class="time-label">Early Afternoon</div>
        <div class="place-item" data-id="sun-return">
          <div class="place-header">
                        <div class="place-content">
              <div class="place-name">Return to city, rest at hotel</div>
              <p class="place-desc">Recharge after the early morning</p>
            </div>
          </div>
        </div>
      </div>

      <div class="time-block">
        <div class="time-label">Late Afternoon</div>
        <div class="place-item" data-id="sun-coffee">
          <div class="place-header">
                        <div class="place-content">
              <div class="place-name">Coffee & light exploring</div>
              <p class="place-desc">Keep it chill — Polanco or nearby</p>
            </div>
          </div>
        </div>
      </div>

      <div class="time-block">
        <div class="time-label">Dinner</div>
        <div class="place-item" data-id="sun-dinner">
          <div class="place-header">
            <div class="image-stack">
              <img src="images/comedor-jacinta-1.jpg" alt="Comedor Jacinta" class="stack-1" loading="lazy">
              <img src="images/comedor-jacinta-2.jpg" alt="Comedor Jacinta" class="stack-2" loading="lazy">
              <img src="images/comedor-jacinta-3.jpg" alt="Comedor Jacinta" class="stack-3" loading="lazy">
              <img src="images/comedor-jacinta-4.jpg" alt="Comedor Jacinta" class="stack-4" loading="lazy">
              <img src="images/comedor-jacinta-5.jpg" alt="Comedor Jacinta" class="stack-5" loading="lazy">
            </div>
                        <div class="place-content">
              <div class="place-name">Comedor Jacinta</div>
              <p class="place-desc">Home-style Mexican, Bib Gourmand — in Polanquito</p>
              <a href="https://maps.google.com/?q=Comedor+Jacinta+Mexico+City" class="place-link" target="_blank" rel="noopener">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg>
                Map
              </a>
              <a href="https://m.uber.com/ul/?action=setPickup&dropoff[formatted_address]=Comedor+Jacinta+Mexico+City" class="place-link" target="_blank" rel="noopener">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="1" y="3" width="15" height="13" rx="2"/><path d="M16 8h2a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-1"/><circle cx="5.5" cy="18.5" r="2.5"/><circle cx="18.5" cy="18.5" r="2.5"/></svg>
                Uber
              </a>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Monday Panel -->
    <section class="panel" id="panel-mon">
      <div class="day-header">
        <h2 class="day-title">Monday, Jan 19</h2>
        <p class="day-subtitle">Departure</p>
      </div>

      <div class="time-block">
        <div class="time-label">~6:30 AM</div>
        <div class="place-item" data-id="mon-coffee">
          <div class="place-header">
                        <div class="place-content">
              <div class="place-name">Quick coffee & pastry</div>
              <p class="place-desc">Grab something near the hotel</p>
            </div>
          </div>
        </div>
      </div>

      <div class="time-block">
        <div class="time-label">~7:00 AM</div>
        <div class="place-item" data-id="mon-depart">
          <div class="place-header">
                        <div class="place-content">
              <div class="place-name">Head to airport</div>
              <p class="place-desc">~45 min to MEX, arrive by 8am</p>
            </div>
          </div>
        </div>
      </div>

      <div class="flight-card">
        <div class="flight-label">Return Flight</div>
        <div class="flight-route">MEX → MIA</div>
        <div class="flight-details">
          <span class="flight-number">Delta 9116</span> · 11:00am – 3:22pm
        </div>
      </div>
    </section>
  </main>

  <button class="history-btn" id="historyBtn" aria-label="History guide">
    <svg class="icon-book" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/>
      <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/>
      <line x1="8" y1="7" x2="16" y2="7"/>
      <line x1="8" y1="11" x2="14" y2="11"/>
    </svg>
    <svg class="icon-close" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <line x1="18" y1="6" x2="6" y2="18"/>
      <line x1="6" y1="6" x2="18" y2="18"/>
    </svg>
  </button>

  <div class="history-panel" id="historyPanel">
    <!-- Browse View -->
    <div class="history-browse" id="historyBrowse">
      <div class="era-cards" id="eraCards">
        <div class="era-card card-1" data-era="prehispanic">
          <img src="images/history/prehispanic.jpg" alt="Pre-Hispanic Mexico" class="era-card-image">
          <div class="era-card-content">
            <div class="era-card-dates">1325 – 1521</div>
            <h3 class="era-card-title">Pre-Hispanic</h3>
            <p class="era-card-teaser">The Aztec capital Tenochtitlan rose from the lake, becoming one of the world's largest cities.</p>
            <div class="era-card-arrow"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14M12 5l7 7-7 7"/></svg></div>
          </div>
        </div>

        <div class="era-card card-2" data-era="colonial">
          <img src="images/history/colonial.jpg" alt="Colonial Mexico" class="era-card-image">
          <div class="era-card-content">
            <div class="era-card-dates">1521 – 1821</div>
            <h3 class="era-card-title">Colonial</h3>
            <p class="era-card-teaser">Three centuries of Spanish rule transformed the city into the "City of Palaces."</p>
            <div class="era-card-arrow"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14M12 5l7 7-7 7"/></svg></div>
          </div>
        </div>

        <div class="era-card card-3" data-era="independence">
          <img src="images/history/independence.jpg" alt="Independence Era Mexico" class="era-card-image">
          <div class="era-card-content">
            <div class="era-card-dates">1821 – 1910</div>
            <h3 class="era-card-title">Independence & Reform</h3>
            <p class="era-card-teaser">A new nation emerged through revolution, reform, and the reign of Porfirio Díaz.</p>
            <div class="era-card-arrow"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14M12 5l7 7-7 7"/></svg></div>
          </div>
        </div>

        <div class="era-card card-4" data-era="modern">
          <img src="images/history/modern.jpg" alt="Modern Mexico City" class="era-card-image">
          <div class="era-card-content">
            <div class="era-card-dates">1910 – Present</div>
            <h3 class="era-card-title">Revolution & Modern</h3>
            <p class="era-card-teaser">From muralism to megacity, Mexico City became a cultural capital of the Americas.</p>
            <div class="era-card-arrow"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14M12 5l7 7-7 7"/></svg></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Detail Views -->
    <div class="history-detail" id="detail-prehispanic">
      <button class="detail-back" id="backFromPrehispanic">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
        Back
      </button>
      <img src="images/history/prehispanic.jpg" alt="Pre-Hispanic Mexico" class="detail-image">
      <div class="detail-dates">1325 – 1521</div>
      <h2 class="detail-title">Pre-Hispanic Era</h2>
      <div class="detail-content">
        <p>According to legend, the Aztecs (or Mexica) wandered for generations seeking a sign from their god Huitzilopochtli: an eagle perched on a cactus, devouring a serpent. In 1325, they found this omen on an island in Lake Texcoco and founded <strong>Tenochtitlan</strong> — the site of modern Mexico City.</p>

        <p>Within two centuries, Tenochtitlan grew into one of the world's largest cities, home to over 200,000 people. The Aztecs built an engineering marvel: causeways connected the island to the mainland, aqueducts brought fresh water, and chinampas (floating gardens) provided abundant food. The <strong>Templo Mayor</strong>, a massive twin pyramid, dominated the sacred precinct at the city's heart.</p>

        <p>The Aztec Empire expanded through military conquest and tribute, controlling much of central Mexico. Their sophisticated society included a complex calendar, hieroglyphic writing, and remarkable artistic traditions. Markets like Tlatelolco amazed Spanish observers — larger and more organized than any in Europe.</p>

        <p>This world ended abruptly in 1521 when Hernán Cortés and his indigenous allies conquered Tenochtitlan after a brutal siege. The Spanish systematically dismantled the city, using its stones to build a new capital atop the ruins. Today, the <strong>Zócalo</strong> sits directly over the ancient ceremonial center, and excavations continue to reveal Aztec treasures beneath the modern streets.</p>
      </div>
      <div class="related-places">
        <div class="related-places-title">See on your itinerary</div>
        <a class="related-place-link" data-goto="sat" data-place="templo">Templo Mayor — Saturday</a>
        <a class="related-place-link" data-goto="fri" data-place="museo">Museo de Antropología — Friday</a>
        <a class="related-place-link" data-goto="sat" data-place="zocalo">Zócalo — Saturday</a>
      </div>
    </div>

    <div class="history-detail" id="detail-colonial">
      <button class="detail-back" id="backFromColonial">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
        Back
      </button>
      <img src="images/history/colonial.jpg" alt="Colonial Mexico" class="detail-image">
      <div class="detail-dates">1521 – 1821</div>
      <h2 class="detail-title">Colonial Era</h2>
      <div class="detail-content">
        <p>After the conquest, the Spanish rebuilt Mexico City as the capital of <strong>New Spain</strong>, the crown jewel of Spain's American empire. They drained the lake system (creating the flooding problems that persist today), demolished temples, and constructed churches, palaces, and government buildings in the European style.</p>

        <p>The <strong>Metropolitan Cathedral</strong>, begun in 1573 and completed over 250 years, rose on the ruins of the Templo Mayor. Its sinking foundations — visible today in its tilted towers — reflect the unstable lakebed beneath. Nearby, the <strong>Palacio Nacional</strong> stands on the site of Moctezuma's palace, now housing Diego Rivera's famous murals depicting Mexican history.</p>

        <p>Colonial society was rigidly stratified: Spanish-born peninsulares at the top, then criollos (American-born Spanish), mestizos, indigenous people, and African slaves. Yet a unique Mexican culture emerged from this mixing — visible in Baroque churches that blend European and indigenous artistic traditions, in the cuisine that fused Old and New World ingredients, and in religious practices that incorporated pre-Hispanic elements.</p>

        <p>By the 18th century, Mexico City was called the "City of Palaces" — one of the grandest capitals in the Americas. The <strong>Palacio de Correos</strong> and nearby colonial buildings showcase the architectural ambition of this era. But growing inequality and Enlightenment ideas planted seeds of revolution.</p>
      </div>
      <div class="related-places">
        <div class="related-places-title">See on your itinerary</div>
        <a class="related-place-link" data-goto="sat" data-place="catedral">Catedral Metropolitana — Saturday</a>
        <a class="related-place-link" data-goto="sat" data-place="nacional">Palacio Nacional — Saturday</a>
        <a class="related-place-link" data-goto="sat" data-place="correos">Palacio de Correos — Saturday</a>
        <a class="related-place-link" data-goto="sat" data-place="zocalo">Zócalo — Saturday</a>
      </div>
    </div>

    <div class="history-detail" id="detail-independence">
      <button class="detail-back" id="backFromIndependence">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
        Back
      </button>
      <img src="images/history/independence.jpg" alt="Independence Era Mexico" class="detail-image">
      <div class="detail-dates">1821 – 1910</div>
      <h2 class="detail-title">Independence & Reform</h2>
      <div class="detail-content">
        <p>On September 16, 1810, Father Miguel Hidalgo rang the church bell in Dolores and issued his famous <strong>Grito</strong> (cry) for independence. After 11 years of war, Mexico won independence in 1821 — but decades of instability followed. The country cycled through emperors, dictators, and 50 governments in 30 years.</p>

        <p>The mid-19th century brought the <strong>Reform War</strong> and the liberal constitution of 1857, championed by Benito Juárez, Mexico's first indigenous president. His reforms separated church and state, but triggered a French intervention that briefly installed Maximilian I as emperor. The <strong>Angel of Independence</strong> monument on Paseo de la Reforma commemorates the heroes of these turbulent years.</p>

        <p>Porfirio Díaz seized power in 1876 and ruled for 35 years, transforming Mexico City into a modern capital. His regime — the <strong>Porfiriato</strong> — built grand European-style boulevards, theaters, and public buildings. The <strong>Palacio de Bellas Artes</strong>, though completed later, was conceived during this era. Díaz attracted foreign investment and created a prosperous elite, but rural poverty and political repression festered beneath the gilded surface.</p>

        <p>By 1910, Mexico appeared stable and modern. But the dictator had overstayed his welcome, and a stolen election sparked the revolution that would transform the nation.</p>
      </div>
      <div class="related-places">
        <div class="related-places-title">See on your itinerary</div>
        <a class="related-place-link" data-goto="sat" data-place="bellas">Palacio de Bellas Artes — Saturday</a>
        <a class="related-place-link" data-goto="sat" data-place="nacional">Palacio Nacional — Saturday</a>
      </div>
    </div>

    <div class="history-detail" id="detail-modern">
      <button class="detail-back" id="backFromModern">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
        Back
      </button>
      <img src="images/history/modern.jpg" alt="Modern Mexico City" class="detail-image">
      <div class="detail-dates">1910 – Present</div>
      <h2 class="detail-title">Revolution & Modern Era</h2>
      <div class="detail-content">
        <p>The <strong>Mexican Revolution</strong> (1910-1920) was one of the first major social upheavals of the 20th century. Figures like Pancho Villa, Emiliano Zapata, and Venustiano Carranza fought for land reform, workers' rights, and democratic government. The 1917 Constitution — still in effect today — established sweeping social protections.</p>

        <p>The post-revolutionary government commissioned monumental public art to forge a national identity. <strong>Diego Rivera, David Alfaro Siqueiros, and José Clemente Orozco</strong> — Los Tres Grandes — covered public buildings with murals celebrating Mexico's indigenous heritage and revolutionary ideals. Rivera's stunning works at the Palacio Nacional tell the entire story of Mexican civilization.</p>

        <p>Mexico City exploded in the 20th century, growing from 1 million in 1930 to over 21 million today. Neighborhoods like Roma and Condesa, built in the 1920s-40s, showcase Art Deco architecture and tree-lined streets. The 1985 earthquake devastated the city but sparked civic organizing that transformed Mexican politics.</p>

        <p>Today's CDMX is a global cultural capital — home to world-class museums, innovative restaurants, and vibrant contemporary art scenes. The <strong>Museo de Antropología</strong> houses perhaps the world's greatest collection of pre-Columbian art. From ancient ruins to cutting-edge cuisine, the city layers 700 years of history in every neighborhood you'll explore.</p>
      </div>
      <div class="related-places">
        <div class="related-places-title">See on your itinerary</div>
        <a class="related-place-link" data-goto="sat" data-place="nacional">Palacio Nacional (Rivera murals) — Saturday</a>
        <a class="related-place-link" data-goto="sat" data-place="bellas">Palacio de Bellas Artes — Saturday</a>
        <a class="related-place-link" data-goto="fri" data-place="museo">Museo de Antropología — Friday</a>
        <a class="related-place-link" data-goto="sat" data-place="parque">Parque México (Art Deco) — Saturday</a>
      </div>
    </div>
  </div>

  <script>
    const tabs = document.querySelectorAll('.tab');
    const panels = document.querySelectorAll('.panel');

    function switchTab(panelId) {
      tabs.forEach(t => t.classList.remove('active'));
      panels.forEach(p => p.classList.remove('active'));
      
      const targetTab = document.querySelector(`.tab[data-panel="${panelId}"]`);
      const targetPanel = document.getElementById(`panel-${panelId}`);
      
      if (targetTab) targetTab.classList.add('active');
      if (targetPanel) targetPanel.classList.add('active');
      
      if (targetTab) {
        targetTab.scrollIntoView({ behavior: 'smooth', inline: 'center', block: 'nearest' });
      }
    }

    tabs.forEach(tab => {
      tab.addEventListener('click', () => switchTab(tab.dataset.panel));
    });

    document.querySelectorAll('.overview-day').forEach(card => {
      card.addEventListener('click', () => switchTab(card.dataset.goto));
    });

    // History Guide
    const historyBtn = document.getElementById('historyBtn');
    const historyPanel = document.getElementById('historyPanel');
    const historyBrowse = document.getElementById('historyBrowse');
    const eraCards = document.getElementById('eraCards');

    historyBtn.addEventListener('click', () => {
      const isOpen = historyPanel.classList.contains('open');
      if (isOpen) {
        historyPanel.classList.remove('open');
        historyBtn.classList.remove('active');
        showBrowseView();
      } else {
        historyPanel.classList.add('open');
        historyBtn.classList.add('active');
      }
    });

    function showBrowseView() {
      historyBrowse.classList.remove('hidden');
      document.querySelectorAll('.history-detail').forEach(d => d.classList.remove('active'));
    }

    function showDetailView(era) {
      historyBrowse.classList.add('hidden');
      document.getElementById(`detail-${era}`).classList.add('active');
      historyPanel.scrollTop = 0;
    }

    // Back buttons
    document.querySelectorAll('.detail-back').forEach(btn => {
      btn.addEventListener('click', showBrowseView);
    });

    // Related place links - close panel and navigate
    document.querySelectorAll('.related-place-link').forEach(link => {
      link.addEventListener('click', () => {
        const goto = link.dataset.goto;
        historyPanel.classList.remove('open');
        historyBtn.classList.remove('active');
        showBrowseView();
        setTimeout(() => switchTab(goto), 100);
      });
    });

    // Era card swipe handling
    const cards = eraCards.querySelectorAll('.era-card');
    let cardStartX = 0;
    let cardStartY = 0;
    let cardCurrentX = 0;
    let cardIsDragging = false;
    let cardIsHorizontal = null;

    function rotateCards() {
      const cardArray = Array.from(cards);
      const first = cardArray.find(c => c.classList.contains('card-1'));
      if (!first) return;

      first.classList.add('swiping');

      setTimeout(() => {
        cards.forEach(card => {
          if (card.classList.contains('card-1')) {
            card.classList.remove('card-1');
            card.classList.add('card-4');
          } else if (card.classList.contains('card-2')) {
            card.classList.remove('card-2');
            card.classList.add('card-1');
          } else if (card.classList.contains('card-3')) {
            card.classList.remove('card-3');
            card.classList.add('card-2');
          } else if (card.classList.contains('card-4')) {
            card.classList.remove('card-4');
            card.classList.add('card-3');
          }
          card.classList.remove('swiping');
        });
      }, 250);
    }

    eraCards.addEventListener('touchstart', (e) => {
      cardStartX = e.touches[0].clientX;
      cardStartY = e.touches[0].clientY;
      cardCurrentX = cardStartX;
      cardIsDragging = true;
      cardIsHorizontal = null;
    }, { passive: true });

    eraCards.addEventListener('touchmove', (e) => {
      if (!cardIsDragging) return;

      const deltaX = Math.abs(e.touches[0].clientX - cardStartX);
      const deltaY = Math.abs(e.touches[0].clientY - cardStartY);

      if (cardIsHorizontal === null && (deltaX > 10 || deltaY > 10)) {
        cardIsHorizontal = deltaX > deltaY;
      }

      if (cardIsHorizontal) {
        e.preventDefault();
        cardCurrentX = e.touches[0].clientX;
      }
    }, { passive: false });

    eraCards.addEventListener('touchend', () => {
      if (!cardIsDragging) return;
      cardIsDragging = false;

      if (cardIsHorizontal) {
        const diff = cardStartX - cardCurrentX;
        if (Math.abs(diff) > 40) {
          rotateCards();
        }
      }
      cardIsHorizontal = null;
    });

    // Tap to open detail view
    cards.forEach(card => {
      card.addEventListener('click', (e) => {
        // Only trigger on top card, and not during swipe
        if (card.classList.contains('card-1') && !card.classList.contains('swiping')) {
          const era = card.dataset.era;
          showDetailView(era);
        }
      });
    });

    const offlineBanner = document.getElementById('offlineBanner');

    function updateOnlineStatus() {
      if (!navigator.onLine) {
        offlineBanner.classList.add('show');
      } else {
        offlineBanner.classList.remove('show');
      }
    }

    window.addEventListener('online', updateOnlineStatus);
    window.addEventListener('offline', updateOnlineStatus);
    updateOnlineStatus();

    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('sw.js').catch(err => {
        console.log('SW registration failed:', err);
      });
    }

    // Image stack swipe handling
    document.querySelectorAll('.image-stack').forEach(stack => {
      const images = stack.querySelectorAll('img');
      if (images.length === 0) return;

      let startX = 0;
      let startY = 0;
      let currentX = 0;
      let isDragging = false;
      let isHorizontalSwipe = null;

      function rotateStack() {
        const first = Array.from(images).find(img => img.classList.contains('stack-1'));
        if (!first) return;

        first.classList.add('swiping-out');

        setTimeout(() => {
          images.forEach(img => {
            if (img.classList.contains('stack-1')) {
              img.classList.remove('stack-1');
              img.classList.add('stack-5');
            } else if (img.classList.contains('stack-2')) {
              img.classList.remove('stack-2');
              img.classList.add('stack-1');
            } else if (img.classList.contains('stack-3')) {
              img.classList.remove('stack-3');
              img.classList.add('stack-2');
            } else if (img.classList.contains('stack-4')) {
              img.classList.remove('stack-4');
              img.classList.add('stack-3');
            } else if (img.classList.contains('stack-5')) {
              img.classList.remove('stack-5');
              img.classList.add('stack-4');
            }
            img.classList.remove('swiping-out');
          });
        }, 200);
      }

      stack.addEventListener('touchstart', (e) => {
        startX = e.touches[0].clientX;
        startY = e.touches[0].clientY;
        currentX = startX;
        isDragging = true;
        isHorizontalSwipe = null;
      }, { passive: true });

      stack.addEventListener('touchmove', (e) => {
        if (!isDragging) return;

        const deltaX = Math.abs(e.touches[0].clientX - startX);
        const deltaY = Math.abs(e.touches[0].clientY - startY);

        // Determine swipe direction on first significant movement
        if (isHorizontalSwipe === null && (deltaX > 10 || deltaY > 10)) {
          isHorizontalSwipe = deltaX > deltaY;
        }

        // If horizontal swipe, prevent scroll and track position
        if (isHorizontalSwipe) {
          e.preventDefault();
          currentX = e.touches[0].clientX;
        }
      }, { passive: false });

      stack.addEventListener('touchend', () => {
        if (!isDragging) return;
        isDragging = false;

        if (isHorizontalSwipe) {
          const diff = startX - currentX;
          if (Math.abs(diff) > 30) {
            rotateStack();
          }
        }
        isHorizontalSwipe = null;
      });

      // Click/tap to cycle as well
      stack.addEventListener('click', (e) => {
        if (e.target.tagName === 'IMG') {
          rotateStack();
        }
      });
    });
  </script>
</body>
</html>
